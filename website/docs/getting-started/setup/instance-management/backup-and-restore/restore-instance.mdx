---
description: Learn how to restore an Appsmith instance from a backup using the `appsmithctl` command-line utility.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Restore Instance

This page explains how to restore your self-hosted Appsmith instance backup using the `appsmithctl` utility.

## Prerequisites

Before starting, ensure the following:

- Your self-hosted Appsmith instance is running. If you haven’t already installed Appsmith, refer to the [Installation guides](/getting-started/setup/installation-guides). This guide assumes you are working with an existing installation.
- Ensure you have at least 2 GB of free storage available to perform restore tasks.
- Ensure that you have the appropriate access to execute `docker-compose` or `kubectl` commands, depending on your deployment setup.
- Verify that the backup archive file you want to restore is available.

## Restore instance backup

Follow the appropriate instructions based on your deployment environment:

<Tabs queryString="current-command-type">

<TabItem label="Docker" value="docker-commands">

Follow these steps to restore your Appsmith instance for Docker-based installations:

1. Restore the Appsmith instance:

   ```bash
   docker-compose exec appsmith appsmithctl restore
   ```

   The command lists available backup archives, with the latest appearing at the bottom.

2. Select a backup archive from the list to restore.

   <ZoomImage src="/img/restore-appsmith-instance.png" alt="Select a backup archive while restoring Appsmith instance" caption="Select a backup archive while restoring Appsmith instance" />

   :::caution Attention
   If you are restoring an older version of Appsmith, a warning message may appear. Update the `docker-compose.yml` file with the Appsmith image version you wish to restore.
   :::

3. Choose whether to use the existing encryption values or create new ones for the following parameters:
   - `APPSMITH_ENCRYPTION_PASSWORD`
   - `APPSMITH_ENCRYPTION_SALT`

   <ZoomImage src="/img/restore-appsmith-instance-encryption.png" alt="Option to use existing encryption values" caption="Option to use existing encryption values" />

</TabItem>

<TabItem label="Kubernetes" value="kubernetes-commands">

Follow these steps to restore your Appsmith instance for Kubernetes-based installations:

1. Retrieve the name of the Appsmith pod:

   ```bash
   kubectl get pods
   ```

2. Copy the backup archive file to the pod. Replace `ANY_APPSMITH_POD_NAME` with the pod name:

   - For encrypted archive files:

     ```bash
     kubectl cp appsmith-backup-TIMESTAMP.tar.gz.enc ANY_APPSMITH_POD_NAME:/appsmith-stacks/data/backup/
     ```

   - For unencrypted archive files:

     ```bash
     kubectl cp appsmith-backup-TIMESTAMP.tar.gz ANY_APPSMITH_POD_NAME:/appsmith-stacks/data/backup/
     ```

3. Navigate to the `/appsmith-stacks/configuration/` folder and update the `docker.env` file with the following parameters:

   ```bash
   # The values generated and stored during the backup process
   APPSMITH_ENCRYPTION_PASSWORD=APPSMITH_ENCRYPTION_PASSWORD
   APPSMITH_ENCRYPTION_SALT=APPSMITH_ENCRYPTION_SALT
   ```

4. Restore the backup. Replace `ANY_APPSMITH_POD_NAME` with the pod name:

   ```bash
   kubectl exec ANY_APPSMITH_POD_NAME -- appsmithctl restore
   ```

5. Restart the Appsmith pods based on your setup:

   - If autoscaling is **turned on**:

     ```bash
     kubectl rollout restart deployment appsmith
     ```

   - If autoscaling is **turned off**, or you’re using the Community Edition:

     ```bash
     kubectl rollout restart statefulset appsmith
     ```

</TabItem>

</Tabs>

## Troubleshooting

If you encounter any issues during the restore process, consider the following:

- **Missing backup file:** Ensure the backup archive is copied to the correct folder within the container or pod.
- **Permission errors:** Verify that you have the required permissions to execute `docker-compose` or `kubectl` commands.
- **Encryption mismatch:** If using encrypted backups, confirm that the encryption password and salt match the original values used during backup creation.
- **Pod restart fails:** If restarting the pods fails, check the logs for errors using the following commands:
  - For Docker: 

    ```bash
    docker-compose logs
    ```
  - For Kubernetes:

    ```bash
    kubectl logs ANY_APPSMITH_POD_NAME
    ```

## Troubleshooting

If you face issues, contact support using the chat widget available in the bottom-right corner of this page.