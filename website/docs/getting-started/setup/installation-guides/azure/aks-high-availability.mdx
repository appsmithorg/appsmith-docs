---
description: Deploy Appsmith with High Availability on Azure Kubernetes Service (AKS)
title: Azure AKS High Availability
hide_title: true
sidebar_position: 2
toc_max_heading_level: 2
---

<!-- vale off -->

<div className="tag-wrapper">
 <h1>High Availability on Azure AKS</h1>

<Tags
tags={[
{ name: "Business", link: "https://www.appsmith.com/pricing", additionalClass: "business" }
]}
/>

</div>

<!-- vale on -->

This guide explains how to deploy Appsmith on an Azure Kubernetes Service (AKS) cluster with High Availability. High availability ensures that your Appsmith instance remains accessible without interruption, even during system disruptions.

## Prerequisites

Before setting up high availability for Appsmith on Azure AKS, ensure the following requirements are met:

- [Azure CLI](https://learn.microsoft.com/en-us/cli/azure) installed and logged in
- [Helm](https://helm.sh/docs/intro/install/) installed and configured
- Access to the Appsmith Helm repository
- An active [Azure subscription](https://azure.com/free)
- At least 2 GB of free storage available for backup and update tasks

## Configure variables

Update the following values starting with 'my' where necessary, and enter them in your shell/terminal:

```bash
RESOURCE_GROUP="myResourceGroup"
LOCATION="centralindia"
STORAGE_ACCOUNT_NAME="mystorageaccount$RANDOM"
SHARE_NAME="myFileShareName"
AKS_NAME="myAppsmithAKS"
```

## 1. Create Resource Group

Create a resource group to organize your Azure resources:

```bash
az group create --name $RESOURCE_GROUP --location $LOCATION
```

## 2. Create Azure File System

Create an Azure Storage Account and File Share for persistent storage:

```bash
# Create storage account
az storage account create \
  --resource-group $RESOURCE_GROUP \
  --name $STORAGE_ACCOUNT_NAME \
  --location $LOCATION \
  --sku Standard_LRS

# Create file share
az storage share-rm create \
  --storage-account $STORAGE_ACCOUNT_NAME \
  --name $SHARE_NAME \
  --quota 100
```

## 3. Create AKS Cluster

Create an AKS cluster with the necessary configuration for high availability:

```bash
az aks create \
  --resource-group $RESOURCE_GROUP \
  --name $AKS_NAME \
  --node-count 1 \
  --node-vm-size Standard_B4ms \
  --generate-ssh-keys \
  --location $LOCATION
```

:::note
For production environments, consider using multiple nodes and larger VM sizes for better performance and availability.
:::

## 4. Create Persistent Volume Claim (PVC)

Create a file named `pvc-azurefile-csi.yaml`:

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: pvc-azurefile
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 100Gi
  storageClassName: azurefile-csi
```

Apply the PVC to your cluster:

```bash
kubectl apply -f pvc-azurefile-csi.yaml
```

## 5. Get PVC and PV Information

Retrieve the Persistent Volume information:

```bash
kubectl get pvc pvc-azurefile
kubectl describe pvc pvc-azurefile | grep VolumeName
```

Note the VolumeName from the output - you'll need this for the next step.

## 6. Get Appsmith Helm Values

Download the default Helm values for Appsmith:

```bash
helm show values appsmith-ee/appsmith > values.yaml
```

Update the `values.yaml` file with the obtained PVC and PV values:

```yaml
existingClaim:
  enabled: true
  name: <VolumeName-from-above-command>
  claimName: pvc-azurefile
```

Replace `<VolumeName-from-above-command>` with the actual VolumeName you obtained in step 5.

## 7. Install Appsmith with Helm

Install Appsmith using Helm with the configured values:

```bash
helm upgrade -i appsmith appsmith-ee/appsmith \
  -n appsmith-ee \
  --create-namespace \
  -f values.yaml
```

## Verification

Verify that Appsmith is running correctly:

```bash
kubectl get pods -n appsmith-ee
kubectl get svc -n appsmith-ee
```

Appsmith should now be running in HA mode on your AKS cluster.

## Post-installation configuration

Once you have completed the installation process, consider performing the tasks below to configure and manage your Appsmith instance, enhancing its security and performance, specifically if it's intended for production use.

<br/>
<div className="containerGridSampleApp">
  <a className="containerAnchor containerColumnSampleApp columnGrid column-one" href="/getting-started/setup/instance-configuration/authentication">
    <div className="containerHead">
      <div className="containerHeading">
        <strong>Configure Single Sign-on (SSO)</strong>
      </div>
    </div>
    <div className="containerBody">
      Set up authentication with your identity provider for secure access to Appsmith.
    </div>
  </a>
  <a className="containerAnchor containerColumnSampleApp columnGrid column-two" href="/getting-started/setup/instance-configuration/custom-domain">
    <div className="containerHead">
      <div className="containerHeading">
        <strong>Configure Custom Domain</strong>
      </div>
    </div>
    <div className="containerBody">
      Set up a custom domain for your Appsmith instance to improve branding and user experience.
    </div>
  </a>
  <a className="containerAnchor containerColumnSampleApp columnGrid column-three" href="/getting-started/setup/instance-configuration/email">
    <div className="containerHead">
      <div className="containerHeading">
        <strong>Configure Email</strong>
      </div>
    </div>
    <div className="containerBody">
      Configure email settings to enable user invitations and notifications.
    </div>
  </a>
</div>

## Troubleshooting

If you encounter issues during installation, refer to the [troubleshooting guide](/help-and-support/troubleshooting-guide) for common solutions and error resolutions.

## Related

- [Kubernetes Installation Guide](/getting-started/setup/installation-guides/kubernetes)
- [High Availability on AWS EKS](/getting-started/setup/installation-guides/kubernetes/configure-high-availability)
- [Azure Container Instance](/getting-started/setup/installation-guides/azure-aci)
