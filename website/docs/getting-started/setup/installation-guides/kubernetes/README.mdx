---
description: Deploy Appsmith on a Kubernetes cluster
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Kubernetes

[Kubernetes (K8s)](https://kubernetes.io/docs/concepts/overview/) is an open source platform for managing, scaling, and automating the deployment of [containerized applications](https://en.wikipedia.org/wiki/Containerization). It's one of the most popular container orchestration tools. This guide helps you to install Appsmith on a Kubernetes cluster using the [Helm](https://helm.sh) package manager.

## Prerequisites
Before you install Appsmith, ensure the following are installed:

1. Helm Package Manager - This is a package manager for Kubernetes clusters. It allows you to install and manage applications on Kubernetes clusters. To install Helm, follow the instructions for your platform from the official [Helm documentation](https://helm.sh/docs/intro/install/).

2. `kubectl` - This is the command-line interface to manage resources on Kubernetes clusters. To install `kubectl`, follow the instructions for your platform from the official [Kubernetes documentation](https://kubernetes.io/docs/tasks/tools/#kubectl).

### Configure Kubernetes cluster
Follow one of the available guidelines below to configure the Kubernetes cluster.

<Tabs groupId="configurations">
 <TabItem label="AWS EKS" value="AWSEKS">

  1. Set up the Kubernetes cluster by [creating a kubeconfig for Amazon EKS](https://docs.aws.amazon.com/eks/latest/userguide/create-kubeconfig.html).
  2. Ensure that you have a default storage class running. If not, [create default storage class](https://docs.aws.amazon.com/eks/latest/userguide/storage-classes.html)    
  3. The NGINX Ingress Controller is enabled by default. If not, [install NGINX Controller for AWS EKS](https://kubernetes.github.io/ingress-nginx/deploy/#network-load-balancer-nlb).
    Ensure that you enable the correct version for your cluster.

</TabItem>
<TabItem label="Minikube" value="Minikube">

  1. [Setup kubectl](https://minikube.sigs.k8s.io/docs/handbook/kubectl/)
  2. Ensure that you have a default storage class running. If not, [enable addon default-storage class](https://kubernetes.io/docs/tutorials/hello-minikube/#enable-addons)
  3. The NGINX Ingress Controller is enabled by default. If not, [set up Ingress on Minikube with the NGINX Ingress Controller](https://kubernetes.io/docs/tasks/access-application-cluster/ingress-minikube/).
  Ensure that you enable the correct version for your cluster.

</TabItem>
<TabItem label="Google Cloud Kubernetes" value="GoogleCloudKubernetes">

  1. [Configure cluster access for kubectl](https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl) on Google Cloud Kubernetes.
  2. Ensure that you have a default storage class running. If not, [set up a default storage class on Google Kubernetes Engine](https://cloud.google.com/anthos/clusters/docs/on-prem/1.3/how-to/default-storage-class)[GKE].
  3. The NGINX Ingress Controller is enabled by default. If not, [install ingress controller on Google Kubernetes Engine](https://kubernetes.github.io/ingress-nginx/deploy/#gce-gke)[GKE]. Ensure that you enable the correct version for your cluster.

</TabItem>
<TabItem label="Microk8s" value="Microk8s">

  1. Set up Kubernetes by following [working with kubectl](https://microk8s.io/docs/working-with-kubectl).
  2. Ensure that you have a default storage class running. If not, [enable storage class](https://microk8s.io/docs/command-reference#heading--microk8s-enable).
  3. The NGINX Ingress Controller is enabled by default. If not, [add on: Ingress](https://microk8s.io/docs/addon-ingress). Ensure that you enable the correct version for your cluster.
    
</TabItem>
</Tabs>

## Install Appsmith

You've installed and configured the Kubernetes cluster. Great, now go ahead and install Appsmith using Helm.

<Tabs groupId="appsmithEditions">
  <TabItem label="Community Edition" value="communityEdition"> 

  Follow the steps below to install Appsmith on your Kubernetes cluster:

  1. Download the [`values.yaml`](https://bit.ly/3ETEgPT) file, and place it into the Appsmith installation folder. Or, run the following `cURL` command:

      ```bash
        curl -L https://bit.ly/3ETEgPT -o "$PWD/values.yml"
      ```

  2. Add the Appsmith chart repository with:

   ```bash
   helm repo add appsmith https://helm.appsmith.com
   ```
   
3. Load the Appsmith chart repository with:

  ```bash
  helm repo update
  ```
4. Install Appsmith on your Kubernetes cluster using the Helm chart. Replace `<your-namespace>` with the namespace you want to install Appsmith in:

  ```bash
  helm install appsmith appsmith/appsmith --namespace <your-namespace>
  ```

When installing Appsmith using Helm, it automatically creates all the necessary Kubernetes objects to run the app on your clusters, such as pods, services, and ingresses with the default configuration. For more information on customizing the configuration, checkout the [Configure Appsmith](#configure-appsmith) section.

5. Verify the status of the Appsmith installation by running the following command:

  ```bash
  kubectl -n <your-namespace> rollout status deployment <release-name>-appsmith
  ```
When the deployment is ready, a message that indicates the deployment of "appsmith" has been successfully rolled out is displayed.

6. Access Appsmith by visiting the URL that was output by the Helm installation command. Use the `kubectl` command to get the URL. The URL has a `hostname` and `port` of the Appsmith ingress to access Appsmith using a web browser.

  ```bash 
  kubectl -n <your-namespace> get ingress <release-name>-appsmith
  ```

Congratulations, you have successfully installed Appsmith on your Kubernetes cluster using Helm. For more detailed instructions and options for configuring the Appsmith Helm chart, see the Configure Appsmith section below.

#### Configure Appsmith
The Appsmith installation works with the default configuration, but you also have the option to customize it to fit your specific needs. To configure the installation parameters, it's recommended to use the `values.yaml` file. This file allows you to specify the settings and options you want to use for your Appsmith installation, allowing you to tailor the installation to your needs. The following is a comprehensive list of available parameters.

##### Parameters
Customize Appsmith by using either Helm parameters or Appsmith-specific parameters. The table below provides details on the various Helm and Appsmith parameters that are available for configuration.

###### Global

| Name                       | Description                                               | Value |
| -------------------------- | --------------------------------------------------------- | ----- |
| `global.namespaceOverride` | Override the namespace for resource deployed by the chart | `""`  |
| `global.storageClass`      | Global StorageClass for Persistent Volume              | `""`  |

###### Common

| Name                | Description                                       | Value        |
| ------------------- | ------------------------------------------------- | ------------ |
| `fullnameOverride`  | String to fully override `appsmith.name` template | `""`         |
| `containerName`     | Specify container's name running in the pods      | `"appsmith"` |
| `commonLabels`      | Labels to add to all deployed objects             | `{}`         |
| `commonAnnotations` | Annotations to add to all deployed objects        | `{}`         |

###### Appsmith image

| Name               | Description                | Value                      |
| ------------------ | -------------------------- | -------------------------- |
| `image.registry`   | Appsmith image registry    | `index.docker.io`          |
| `image.repository` | Appsmith image repository  | `appsmith/appsmith-editor` |
| `image.tag`        | Appsmith image tag         | `latest`                   |
| `image.pullPolicy` | Appsmith image pull policy | `IfNotPresent`             |

###### Appsmith deployment

| Name                 | Description                                        | Value           |
| -------------------- | -------------------------------------------------- | --------------- |
| `strategyType`       | Appsmith deployment strategy type                  | `RollingUpdate` |
| `schedulerName`      | Alternate scheduler                                | `""`            |
| `podAnnotations`     | Annotations for Appsmith pods                      | `{}`            |
| `podSecurityContext` | Appsmith pods security context                     | `{}`            |
| `securityContext`    | Set security context                               | `{}`            |
| `resources.limits`   | The resources limits for the Appsmith container    | `{}`            |
| `resources.requests` | The requested resources for the Appsmith container | `{}`            |
| `nodeSelector`       | Node labels for pod assignment                     | `{}`            |
| `tolerations`        | Tolerations for pod assignment                     | `[]`            |
| `affinity`           | Affinity fod pod assignment                        | `{}`            |

###### Appsmith namespace

| Name               | Description                    | Value  |
| ------------------ | ------------------------------ | ------ |
| `namespace.create` | Enable creation of `Namespace` | `true` |

###### Appsmith service account

| Name                         | Description                                                                                                 | Value  |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------- | ------ |
| `serviceAccount.create`      | Enable creation of `ServiceAccount` for Appsmith pods                                                       | `true` |
| `serviceAccount.name`        | Name of the created `ServiceAccount` . If not set, a name is generated using the appsmith.fullname template | `""`   |
| `serviceAccount.annotations` | Additional service account annotations                                                                      | `{}`   |

###### Traffic exposure

| Name                               | Description                                                                 | Value       |
| ---------------------------------- | --------------------------------------------------------------------------- | ----------- |
| `service.type`                     | Appsmith service type                                                       | `ClusterIP` |
| `service.port`                     | Appsmith service port                                                       | `80`        |
| `service.portName`                 | Appsmith service port name                                                  | `appsmith`  |
| `service.nodePort`                 | Appsmith service node port to expose to expose                              | `8000`      |
| `service.clusterIP`                | Appsmith service Cluster                                                    | `""`        |
| `service.loadBalancerIP`           | Appsmith service Load Balancer IP                                           | `""`        |
| `service.loadBalancerSourceRanges` | Appsmith service Load Balancer sources                                      | `[]`        |
| `service.annotations`              | Additional custom annotations for Appsmith service                          | `{}`        |
| `ingress.enabled`                  | Enable ingress record generation for Appsmith                               | `false`     |
| `ingress.hosts`                    | An array of hosts to be covered with the ingress record                     | `[]`        |
| `ingress.tls`                      | Enable TLS configuration for the hosts defined at `ingress.hosts` parameter | `false`     |
| `ingress.secrets`                  | Custom TLS certificates as secrets                                          | `[]`        |
| `ingress.certManager`              | Enable ingress to use TLS certificates provided by Cert Manager             | `false`     |
| `ingress.certManagerTls`           | Specify TLS secret resources created by Cert Manager                        | `[]`        |
| `ingress.className`                | Configure Ingress class that being used in ingress resource                 | `""`        |

###### Persistence

| Name                                | Description                                                          | Value              |
| ----------------------------------- | -------------------------------------------------------------------- | ------------------ |
| `persistence.enabled`               | Enable persistence using Persistent Volume Claims                    | `true`             |
| `persistence.storageClass`          | Persistent Volume storage class                                      | `""`               |
| `persistence.annotations`           | Additional custom annotations for the PVC                            | `{}`               |
| `persistence.localStorage`          | Enable persistent volume using local storage                         | `false`            |
| `persistence.storagePath`           | Local storage Path                                                   | `/tmp/hostpath_pv` |
| `persistence.localCluster`          | Local running cluster to provide storage space                       | `[minikube]`       |
| `persistence.accessModes`           | Persistent Volume access modes                                       | `[ReadWriteOnce]`  |
| `persistence.size`                  | Persistent Volume size                                               | `10Gi`             |
| `storageClass.enabled`              | Enable Storage Class configuration                                   | `false`            |
| `storageClass.defaultClass`         | Create default Storage Class                                         | `false`            |
| `storageClass.bindingMode`          | Binding mode for Persistent Volume Claims using Storage Class        | `Immediate`        |
| `storageClass.allowVolumeExpansion` | Allow expansion of Persistent Volume Claims using Storage Class      | `true`             |
| `storageClass.reclaimPolicy`        | Configure the retention of the dynamically created Persistent Volume | `Delete`           |
| `storageClass.provisioner`          | Storage Class provisioner                                            | `""`               |
| `storageClass.annotations`          | Additional storage class annotations                                 | `{}`               |
| `storageClass.mountOptions`         | Mount options used by Persistent Volumes                             | `{}`               |
| `storageClass.parameters`           | Storage Class parameters                                             | `{}`               |

###### Auto update image

| Name                   | Description                                   | Value         |
| ---------------------- | --------------------------------------------- | ------------- |
| `autoupdate.enabled`   | Enable auto update Helm chart's image         | `true`        |
| `autoupdate.scheduler` | Schedule time to run cron job to update image | `"0 * * * *"` |

##### Set parameters

When using command, specify each parameter using `--set key=value[,key=value]` argument to helm install. For example, the below command deploys Appsmith and configures it to use the storage class name `appsmith-pv`. 

```bash
helm install \
--set persistence.storageClass=appsmith-pv \
  appsmith appsmith/appsmith 
```

Similarly, run the below command if you wish to change the encryption salt configuration.

```bash 
helm install \
--set applicationConfig.APPSMITH_ENCRYPTION_SALT=123 \
  appsmith appsmith/appsmith 
```

Alternatively, use a `values.yaml` file. You can specify the parameter values needed for installing the chart. To change configurations specific to Appsmith update the `values.yaml` file. Listed below are available configurations for Appsmith.

| Name                                                     | Value |
| -------------------------------------------------------- | ----- |
| [`applicationConfig.APPSMITH_OAUTH2_GOOGLE_CLIENT_ID`](/getting-started/setup/instance-configuration/authentication/google-login)    | `""`  |
| [`applicationConfig.APPSMITH_OAUTH2_GOOGLE_CLIENT_SECRET`](/getting-started/setup/instance-configuration/authentication/google-login) | `""`  |
| [`applicationConfig.APPSMITH_OAUTH2_GITHUB_CLIENT_ID`](/getting-started/setup/instance-configuration/authentication/github-login)     | `""`  |
| [`applicationConfig.APPSMITH_OAUTH2_GITHUB_CLIENT_SECRET`](/getting-started/setup/instance-configuration/authentication/github-login) | `""`  |
| `applicationConfig.APPSMITH_CLIENT_LOG_LEVEL`            | `""`  |
| [`applicationConfig.APPSMITH_GOOGLE_MAPS_API_KEY`](/getting-started/setup/instance-configuration/google-maps)         | `""`  |
| [`applicationConfig.APPSMITH_MAIL_ENABLED`](/getting-started/setup/instance-configuration/email/)                | `""`  |
| [`applicationConfig.APPSMITH_MAIL_HOST`](/getting-started/setup/instance-configuration/email/)                   | `""`  |
| [`applicationConfig.APPSMITH_MAIL_PORT`](/getting-started/setup/instance-configuration/email/)                   | `""`  |
| [`applicationConfig.APPSMITH_MAIL_USERNAME`](/getting-started/setup/instance-configuration/email/)               | `""`  |
| [`applicationConfig.APPSMITH_MAIL_PASSWORD`](/getting-started/setup/instance-configuration/email/)               | `""`  |
| [`applicationConfig.APPSMITH_MAIL_FROM`](/getting-started/setup/instance-configuration/email/)                   | `""`  |
| [`applicationConfig.APPSMITH_REPLY_TO`](/getting-started/setup/instance-configuration/email/)                    | `""`  |
| [`applicationConfig.APPSMITH_MAIL_SMTP_AUTH`](/getting-started/setup/instance-configuration/email/)              | `""`  |
| `applicationConfig.APPSMITH_MAIL_SMTP_TLS_ENABLED`       | `""`  |
| [`applicationConfig.APPSMITH_DISABLE_TELEMETRY`](https://docs.appsmith.com/product/telemetry#disable-telemetry)           | `""`  |
| `applicationConfig.APPSMITH_RECAPTCHA_SITE_KEY`          | `""`  |
| `applicationConfig.APPSMITH_RECAPTCHA_SECRET_KEY`        | `""`  |
| `applicationConfig.APPSMITH_RECAPTCHA_ENABLED`           | `""`  |
| [`applicationConfig.APPSMITH_MONGODB_URI`](/getting-started/setup/instance-configuration/custom-mongodb-redis#custom-mongodb)                | `""`  |
| [`applicationConfig.APPSMITH_REDIS_URL`](/getting-started/setup/instance-configuration/custom-mongodb-redis#custom-redis)                   | `""`  |
| `applicationConfig.APPSMITH_ENCRYPTION_PASSWORD`         | `""`  |
| `applicationConfig.APPSMITH_ENCRYPTION_SALT`             | `""`  |
| [`applicationConfig.APPSMITH_CUSTOM_DOMAIN`](/getting-started/setup/instance-configuration/custom-domain/#dockerk8s)               | `""`  |

Once you have made changes to the values file, run the below command.

```bash
helm install appsmith appsmith/appsmith -f values.yaml 
```

#### Update Appsmith

Appsmith installation can be updated manually or by enabling auto update.

##### Auto update

The default Appsmith helm installation disables auto update (_recommended_). You have an option to enable auto update by either setting it in values file or using a command.

* Values file: Ensure that the parameters are configured to enable auto update. For more information, see [Auto update image](#auto-update-image). Once the set up is in place, run the below command.

   ```
     helm upgrade --values values.yaml appsmith appsmith/appsmith
    ```

* Command: Pass an argument using the `--set` keyword (`--set autoupdate.enabled=true`) to the command.

    ```
      helm install appsmith/appsmith appsmith \
        --set autoupdate.enabled=true
    ```

##### Manual update

To manually update the Appsmith container image to the latest release, run the command: 

```bash
kubectl rollout restart statefulset appsmith
```
  
  </TabItem>
  <TabItem label="Business Edition" value="businessEdition"> 

:::note
To upgrade from Community Edition to Business Edition, follow the instructions available at [Upgrade to Business Edition for Kubernetes](/getting-started/setup/upgrade-to-business-edition/kubernetes).
:::

Follow the steps below to install Appsmith on your Kubernetes cluster:

1. Sign up on [customer.appsmith.com](https://customer.appsmith.com/) and generate a trial license key.

2. Add the Appsmith `appsmith-ee` chart repository with:

    ```bash
    helm repo add appsmith-ee https://helm-ee.appsmith.com
    ```
3. Load the Appsmith chart repository with:

    ```bash
    helm repo update
    ```
4. Generate the `values.yaml` config file:
    ```bash
    helm show values appsmith-ee/appsmith  > values.yaml
    ```

<details id="highAvailability" open>
  <summary> <b>To configure High Availability (HA), be sure to configure the following</b> </summary>

:::note Important

  Both PostgreSQL and MongoDB must be enabled or configured to point to an external instance when `autoscaling` is enabled.
:::

  1. Install `metrics-server`, which provides vital metrics to the Horizontal Pod Autoscaler (HPA) to scale the pods.

    ```bash
    kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
    ```

  2. Enable `autoscaling` in the `values.yaml`. The below shows the `autoscaling` configuration for the Appsmith Deployment:

   ```yaml
        autoscaling:
          # highlight-next-line
          enabled: true
          minReplicas: 2
          maxReplicas: 2
   ```

  3. PostgreSQL has to be enabled Or configure an external PostgreSQL in the `applicationConfig` section in `values.yaml`.

      1. Configure the parameters to enable PostgreSQL as shown below:

      ```yaml
            # enable PostgreSQL
            postgresql:
            # highlight-next-line
                enabled: true
                auth:
                  username: root
      ```

      2. Configure the parameters to point to an external PostgreSQL as shown below:
    
      ```yaml
        # configure an external PostgreSQL
        applicationConfig::
          APPSMITH_KEYCLOAK_DB_DRIVER: "postgresql"
          APPSMITH_KEYCLOAK_DB_USERNAME: "<POSTGRES_USER>"
          APPSMITH_KEYCLOAK_DB_PASSWORD: "<POSTGRES_PASSWORD>"
          APPSMITH_KEYCLOAK_DB_URL: "<POSTGRES_DB_URL>"
      ```

  4.  Enable MongoDB in the `values.yaml` or configure an external MongoDB in the `applicationConfig` in `values.yaml`.

      1. Configure the parameters to enable MongoDB as shown below:

        ```yaml
          # enable MongoDB
          mongodb:
            # highlight-next-line
            enabled: true
            service:
              nameOverride: appsmith-mongodb
        ```
      
      2. Configure the parameters to point to an external MongoDB as shown below:

        ```yaml
        # configure an external MongoDB
          applicationConfig::
            APPSMITH_MONGODB_URI: "<MONGODB_URI>"
        ```

6. Create a shared file system. This is required for some Appsmith features that make use of the filesystem, like `git`-connected applications. Read more about this in the [Create a shared file system](#create-a-shared-file-system) section.

#### Create a shared file system

A shared file system on Kubernetes is a distributed file system that can be accessed and modified by multiple users from different pods within the Kubernetes cluster. it's used to store and share files across multiple pods, allowing users to access and collaborate on shared data.

<Tabs groupId="configurations">
  <TabItem label="AWS EKS" value="AWSEKS">

The [Amazon EFS Container Storage Interface (CSI)](https://docs.aws.amazon.com/eks/latest/userguide/efs-csi.html) driver is a plugin for the Kubernetes container orchestration system that enables you to mount [Amazon Elastic File System (EFS)](https://aws.amazon.com/efs/) on Kubernetes pods. Using the EFS CSI driver, you can create a shared file system on Kubernetes by mounting an EFS file system on the pods in your cluster. Follow the steps available at the official [EFS CSI driver documentation](https://docs.aws.amazon.com/eks/latest/userguide/efs-csi.html) to mount EFS on the Kubernetes pods.

</TabItem>
</Tabs>

##### Configure persistence

Persistence refers to the ability to store data in a way that it's retained even after the associated pod or deployment is deleted. This is important for maintaining the continuity of your applications and ensuring that important data isn't lost. 

To configure persistence, you can use persistent volumes, persistent volume claims, or storage classes, depending on your platform. 

<Tabs groupId="configurations">
  <TabItem label="AWS EKS" value="AWSEKS">

You have the option to either configure EFS using a new [Persistent Volume Claim (PVC)](https://kubernetes.io/docs/concepts/storage/persistent-volumes/) or using an existing PVC.

###### Using new PVC
This is useful when you don't have any existing PVC available or if you want to dedicate a specific PVC solely for EFS. Once the PVC is created, ensure that the following configuration is updated in `values.yaml` file under `persistence` attribute as shown below:

```yaml
  existingClaim:
    enabled: false
    name: 
    claimName: 
  efs:
    # highlight-next-line
    enabled: true
    driver: efs.csi.aws.com
    # highlight-next-line
    volumeHandle: <FILE_SYSTEM_ID>
```

###### Using existing PVC

This is useful if you already have a PVC that you want to reuse for EFS or if you have multiple deployments or pods that need access to the same EFS volume. Ensure that the following configuration is updated in `values.yaml` file under `persistence` attribute as shown below:

```yaml
existingClaim:
    # highlight-next-line
    enabled: true
    name: efsappsmith
    claimName: efsappsmith
  efs:
    enabled: true
    driver: efs.csi.aws.com
    volumeHandle: <FILE_SYSTEM_ID>
```

</TabItem>

<TabItem label="Minikube" value="Minikube">
  To configure persistence in Minikube, ensure that you have set the properties in `values.yaml` file under `persistence` attribute as shown below.

```yaml
  localCluster:
    - minikube
  ## @param persistence.accessModes PV Access Mode
  ##
  accessModes:
    - ReadWriteMany
  ## @param persistence.size PVC Storage Request
  ##
  size: 10Gi
  ## Fine tuning for volumeClaimTemplates
  ##
  existingClaim:
    # highlight-next-line
    enabled: false
    name:
    claimName:
  ReclaimPolicy: Retain
  efs:
    # highlight-next-line
    enabled: false
    driver: 
    volumeHandle:
```

</TabItem>
</Tabs>

</details>


5. Run the below command to deploy Appsmith:

  ```bash
  helm install appsmith appsmith-ee/appsmith -f values.yaml
  ```
  When you run the install command, you may see output as shown below:

  ```
  NAME: appsmith
  LAST DEPLOYED: Mon Oct 24 13:24:07 2022
  NAMESPACE: <namespace>
  STATUS: deployed
  REVISION: 1
  TEST SUITE: None
  ```

  Once deployed run the below commands to verify the installation.

    1. To get the application URL run the below commands:
      
      ```
      export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=appsmith,app.kubernetes.io/instance=appsmith-2-1670479627" -o jsonpath="{.items[0].metadata.name}")
      export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
      echo "Visit http://127.0.0.1:8080 to use your application"
      kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
      ```

    2. Run the command `kubectl get pods` to verify the list of pods. You may see output as shown below:

      ```bash
      NAME                            READY   STATUS    RESTARTS   AGE
      appsmith-875b6cddc-4mmj6        1/1     Running   0          90s
      appsmith-875b6cddc-7b2hw        1/1     Running   0          3m30s
      appsmith-875b6cddc-smzwz        1/1     Running   0          3m15s
      appsmith-mongodb-0              1/1     Running   0          3m30s
      appsmith-mongodb-1              1/1     Running   0          3m10s
      appsmith-mongodb-arbiter-0      1/1     Running   0          3m30s
      appsmith-postgresql-0           1/1     Running   0          3m30s
      appsmith-redis-master-0         1/1     Running   0          3m30s
      appsmith-redis-replicas-0       1/1     Running   0          3m30s
      ```

6. Sign-in to your instance again. Upon successful login, you see a screen where you can enter the license key and activate the instance.

#### Update Appsmith

Appsmith installation can be updated manually or by enabling auto update.

##### Auto update

The default Appsmith helm installation disables auto update (_recommended_). You have an option to enable auto update by either:
  - Running the command below.
    ```
    helm upgrade --set autoupdate.enabled=true \
    appsmith [appsmith-ee|appsmith]/appsmith 
    ```
  - Or edit `values.yaml` and specify the following parameters
    ```yaml
    autoupdate.enabled: true
    autoupdate.scheduler: 0
    ```
    Followed by running the command below.
    ```bash
    helm upgrade --values values.yaml appsmith [appsmith-ee|appsmith]/appsmith
    ```

##### Manual update

To manually update the Appsmith container image to the latest release, run the command: 

```bash
kubectl rollout restart deployment appsmith
```

  </TabItem>
</Tabs>  

## Publish Appsmith

To make your Appsmith installation accessible on the internet, you need an Ingress controller set up. For more information on Ingress controllers, see the [Configure Kubernetes Cluster](#configure-kubernetes-cluster) section. If you haven't yet installed the Helm chart, you can run the following command to install the chart, enable the ingress controller, and publish Appsmith.

To install the Nginx ingress controller on AWS-EKS, GCE-GKE, or Azure, run the following command if it hasn't already been installed:

 ```bash 
  helm install ingress-nginx ingress-nginx/ingress-nginx
  ```

  <Tabs groupId="appsmithEditions">

  <TabItem label="Community Edition" value="communityEdition"> 
  Enable the ingress controller through command or by modifying the `values.yaml` file.
  <details>
  <summary>Follow the steps below to configure using command</summary>
  Run the below command to enable ingress controller:

  ```bash
  helm upgrade appsmith/appsmith \
      --set ingress.enabled=true \
      --set ingress.className=nginx \
      --set service.type=ClusterIP \
  ```

  </details>

  <details id="usingValues">
  <summary>Follow the steps below to configure using `values.yaml`</summary>

  Open the `values.yaml` file and update the parameter values as below:

  ```yaml 
  ingress:
    ## @param ingress.enabled Enable ingress record generation for Ghost
    ##
    enabled: true
    ## @param ingress.annotations Additional custom annotations for the ingress record
    ## NOTE: If `ingress.certManager=true`, annotation `kubernetes.io/tls-acme: "true"` will automatically be added
    ##
    className: nginx
    hosts: []
      # - host: appsmith-domain.me
  service:
    ## @param service.type Kubernetes Service type
    ##
    type: ClusterIP
  ```

  Once the parameter values are modified, run the below command:

  ```bash 
  helm upgrade --values values.yaml appsmith appsmith/appsmith
  ```

  </details>

 </TabItem>
 <TabItem label="Business Edition" value="businessEdition">

   Enable the ingress controller through command or by modifying the `values.yaml` file.

  <details id="usingCommand">
  <summary>Follow the steps below to configure using command</summary>
  Run the below command to enable ingress controller:

  ```bash
  helm upgrade appsmith-ee/appsmith \
      --set ingress.enabled=true \
      --set ingress.className=nginx \
      --set service.type=ClusterIP \
  ```

   </details>
   <details id="usingValues">
  <summary>Follow the steps below to configure using `values.yaml`</summary>
  
  Open the `values.yaml` file and update the parameter values as below:

  ```yaml 
  ingress:
    ## @param ingress.enabled Enable ingress record generation for Ghost
    ##
    enabled: true
    ## @param ingress.annotations Additional custom annotations for the ingress record
    ## NOTE: If `ingress.certManager=true`, annotation `kubernetes.io/tls-acme: "true"` will automatically be added
    ##
    className: nginx
    hosts: []
      # - host: appsmith-domain.me
  service:
    ## @param service.type Kubernetes Service type
    ##
    type: ClusterIP
  ```
    
Once the parameter values are modified, run the below command:

  ```bash 
  helm upgrade --values values.yaml appsmith appsmith-ee/appsmith
  ```
    
  </details>

</TabItem>
</Tabs>
  

* It takes a few minutes for the ingress to get a public IP assigned. Once it has been assigned, you should see an IPv4 address or a domain name in the `ADDRESS` column. Run the below command to get this address:

  ```bash
  kubectl get ingress
  ```
  The command generates the output as shown below:

  ```bash
  NAME       CLASS   HOSTS   ADDRESS                                                                    PORTS   AGE
  appsmith   nginx   *       a918d94876c27453ea78d2883539bb36-1165345706.ap-south-1.elb.amazonaws.com   80      25h
  ```

## Configure TLS

To ensure the security of your Appsmith application, it's recommended to use TLS certificates. One way to do this is by using [Cert Manager](https://cert-manager.io/). Cert Manager secures HTTP traffic with TLS and SSL certificates. The Appsmith Helm chart comes with built-in support for Ingress routes and certificate management through [cert-manager](https://github.com/jetstack/cert-manager). This makes it easy to configure TLS support using certificates from a variety of certificate providers, including [Let's Encrypt](https://letsencrypt.org/).

The steps below explain how to use Ingress routes and cert-manager to configure TLS for your Appsmith deployment using a free `Let's Encrypt` certificate:

:::tip
When executing these commands on Google Kubernetes Engine (GKE), you may encounter permission errors. [Refer to the official cert-manager documentation for notes on how to elevate your permissions](https://docs.cert-manager.io/en/latest/getting-started/install/kubernetes.html).*
:::

1. Obtain the LoadBalancer host name using the command below. Note this host name as you need it to configure DNS in a later step.
  ```
  kubectl get svc --namespace ingress-nginx ingress-nginx-controller  -o jsonpath="{.status.loadBalancer.ingress[0].hostname}"
  ```

2. Browse to the host name and confirm that you can access your Appsmith instance. This indicates that the NGINX Ingress controller is working.

3. Configure the DNS for your domain name by adding a `CNAME` record pointing to the public host name obtained in the previous steps.

4. To use cert-manager, add the repository, create a namespace, and create CRDs.
  i. Add the repository by running below command:
  ```bash
  helm repo add jetstack https://charts.jetstack.io
  ```
  ii. Create a namespace by running below command:
  ```bash
  kubectl create namespace cert-manager
  ```
  iii. Create CRDs by running below command:
  ```bash
  kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.5.3/cert-manager.crds.yaml
  ```

5. To create a ClusterIssuer resource for `Let's Encrypt` certificates, create a file named letsencrypt-appsmith.yaml with the following content, replacing the <EMAIL_ADDRESS> placeholder with a valid email address: 

  ```yaml
  apiVersion: cert-manager.io/v1
  kind: ClusterIssuer
  metadata:
    name: letsencrypt-appsmith
  spec:
    acme:
      email: <EMAIL_ADDRESS>
      server: https://acme-v02.api.letsencrypt.org/directory
      privateKeySecretRef:
        name: letsencrypt-appsmith
      solvers:
      - http01:
          ingress:
            class: nginx
  ```

6. Apply the changes to the cluster:

  ```
  kubectl apply -f letsencrypt-appsmith.yaml
  ```

7. Use Helm to install cert-manager and set up `Let's Encrypt` as the default Certificate Authority (CA).

  ```  
  helm install cert-manager --namespace cert-manager jetstack/cert-manager --version v1.5.3
  ```

8. Install Appsmith with integration to Ingress and cert-manager.

<Tabs groupId="appsmithEditions">
  <TabItem label="Community Edition" value="communityEdition"> 
  You can either use a command or add additional parameters to the `values.yaml` file.

   <details id="usingCommand">
     <summary>Follow the below steps to configure using a command</summary>
      You can use the Helm chart with the following additional parameters. Replace the DOMAIN placeholder with your specific domain name in the below command and run it:

      ```bash
        helm upgrade appsmith appsmith/appsmith \
          --set service.type=ClusterIP \
          --set ingress.enabled=true \
          --set ingress.tls=true \
          --set ingress.certManager=true \
          --set ingress.annotations."cert-manager\.io/cluster-issuer"=letsencrypt-appsmith \
          --set ingress.hosts[0].host=<DOMAIN> \
          --set ingress.certManagerTls[0].hosts[0]=<DOMAIN> \
          --set ingress.certManagerTls[0].secretName=letsencrypt-appsmith
          --set ingress.className=nginx
      ```     

  </details>
     <details id="usingValues">
     <summary>Follow the below steps to configure using a `values.yaml` file</summary>
      Open the `values.yaml` file, and update the parameters as shown below:
      Run the below command once the parameter values are updated:    

      ```bash
      ingress:
          enabled: true
          annotations:
            cert-manager.io/cluster-issuer: "letsencrypt-appsmith"
          hosts:
            - host: example.appsmith.com
          tls: true
          secrets: []
          certManager: true
          certManagerTls:
            - hosts:
                - example.appsmith.com
              secretName: letsencrypt-appsmith
          className: "nginx"
      ```
      Run the below command once the parameter values are updated:

      ```bash
      helm upgrade --values values.yaml appsmith appsmith/appsmith
      ```

</details>
  </TabItem>
  <TabItem label="Business Edition" value="businessEdition"> 
   You can either use a command or add additional parameters to the `values.yaml` file.
   
     <details id="usingCommand">
     <summary>Follow the below steps to configure using a command</summary>
      You can use the Helm chart with the following additional parameters. Replace the DOMAIN placeholder with your specific domain name in the below command and run it:

```bash
  helm upgrade appsmith appsmith-ee/appsmith \
    --set service.type=ClusterIP \
    --set ingress.enabled=true \
    --set ingress.tls=true \
    --set ingress.certManager=true \
    --set ingress.annotations."cert-manager\.io/cluster-issuer"=letsencrypt-appsmith \
    --set ingress.hosts[0].host=<DOMAIN> \
    --set ingress.certManagerTls[0].hosts[0]=<DOMAIN> \
    --set ingress.certManagerTls[0].secretName=letsencrypt-appsmith
    --set ingress.className=nginx
```     

  </details>
     <details id="usingValues">
     <summary>Follow the below steps to configure using a `values.yaml` file</summary>
      Open the `values.yaml` file, and update the parameters as shown below:
      Run the below command once the parameter values are updated:    

```bash
ingress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-appsmith"
    hosts:
      - host: example.appsmith.com
    tls: true
    secrets: []
    certManager: true
    certManagerTls:
      - hosts:
          - example.appsmith.com
        secretName: letsencrypt-appsmith
    className: "nginx"
```
Run the below command once the parameter values are updated:

```bash
helm upgrade --values values.yaml appsmith appsmith-ee/appsmith
```

</details>

  </TabItem>
</Tabs> 

Once the deployment is finished, check the domain in a browser to verify that the Appsmith site is accessible over a secure TLS connection with a valid `Let's Encrypt` certificate.


## Enable data compression for Ingress controller

The default installation doesn't have data compression configured for Nginx ingress controller. Follow the below steps to enable it.

1. Edit the `configMap` for `ingress-nginx-controller` by using the below command.

  ```bash
  kubectl edit configmap -n ingress-nginx ingress-nginx-controller
  ```

2. Add the following to the data section.

  ```yaml
  # Add the data section if not already present
  data: 
    use-gzip: "true" # ENABLE GZIP COMPRESSION
    gzip-types: "*" # SPECIFY MIME TYPES TO COMPRESS ("*" FOR ALL) 
  ```

The Nginx controller automatically updates once you save (`:wq!`) the changes.

## Uninstall Appsmith

The following command uninstalls Appsmith and removes all Kubernetes resources associated with the chart:

1. List the releases by running below command:

```bash
helm list
```
The command generates the output as shown below:

```
NAME                       NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION
#highlight-next-line
appsmith-1631069261        default         1               2021-09-09 11:24:40.152766 +0700 +07    deployed        appsmith-1.3.0  1.16.0
```
2. Pick the release name `appsmith-1631069261` and run the below command to uninstall Appsmith:

```bash
helm uninstall appsmith-1631069261
```
3. Run the command to verify the release status for `appsmith-1631069261`

```bash
helm status <RELEASE_NAME>
```

## Troubleshooting
If youâ€™re having issues with the deployment, please see the [debugging deployment errors](/help-and-support/troubleshooting-guide/deployment-errors.mdx) troubleshooting guide. If you continue to have problems reach out on [Discord Server](https://discord.com/invite/rBTTVJp) or [send an email to support](mailto:support@appsmith.com) or ask questions on the [community forum](https://community.appsmith.com/).

## Further reading

* [Configuring Self Hosted Instances](/getting-started/setup/instance-configuration/#configuring-kubernetes-installations)
* [Managing the Appsmith instance](/getting-started/setup/instance-management/)
* [Migrate to Helm Chart v2 (BE)](/getting-started/setup/installation-guides/kubernetes/migrate-to-be-chart)
* [Migrate from multi-container to single container setup](/getting-started/setup/installation-guides/kubernetes/migrate-k8s)
