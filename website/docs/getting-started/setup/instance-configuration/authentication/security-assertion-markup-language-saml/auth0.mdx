import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Auth0

Auth0 provides Security Assertion Markup Language (SAML) integration that you can use to integrate with Appsmith. Follow these steps to configure SAML integration:

:::info
Security Assertion Markup Language (SAML) is available only in the [**business edition**](https://www.appsmith.com/pricing) for **self-hosted** instances, and only the **Superuser** of your **Appsmith Instance** can set up **SAML**.
:::

## Prerequisites

Once you have enabled SAML in Appsmith, follow the steps below:

- Copy the **Redirect URL** and **Entity URL** to add them later in the Auth0 configuration settings. 

## Auth0 configuration

* Log in to your [Auth0](https://auth0.com/) account and go to **Applications** > **Create Application**. Select and create a **Regular Web Application**.

<figure>
  <img src="/img/Autho_create-app.png" style= {{width:"700px", height:"auto"}} alt="Create Auth0 Application"/>
  <figcaption align = "center"><i>Create Regular Web Application </i></figcaption>
</figure>

* Once your application is created, you’re navigated to the Quickstart screen. Go to the **Settings** tab.
* Scroll down to the **Application URIs** and add the **Redirect URL** in the **Allowed Callback URLs** field.

<figure>
  <img src="/img/auth0_settings_application-uri.png" style= {{width:"700px", height:"auto"}} alt="Auth0 Settings"/>
  <figcaption align = "center"><i>Add Redirect URL to Allowed Callback URLs field </i></figcaption>
</figure>

* Click **Save Changes**.

## Configure Auth0 SAML fields in Appsmith

To complete the SAML configuration, you’ll have to register the identity provider on Appsmith. Appsmith provides three options to register the identity provider as mentioned below:

<Tabs queryString="auth0-saml">
<TabItem label="Metadata URL (recommended)" value="metadataurl">

To get the **Metadata URL** for your application in Auth0, follow the steps below:
* Navigate to the **Settings** tab, scroll down, and expand the **Advanced Settings**.

* Click the **Endpoints**, scroll down to the **SAML** config fields, and copy the SAML Metadata URL.

<figure>
  <img src="/img/auth0_SAML_metadata-url.png" style= {{width:"700px", height:"auto"}} alt="Metadata URL"/>
  <figcaption align = "center"><i>Copy the Metadata URL </i></figcaption>
</figure>

* On the Appsmith **SAML 2.0** screen, add the Metadata URL, and click the **SAVE & RESTART** button to save the configuration.

</TabItem>

<TabItem label="Metadata XML" value="metdataxml">

To set up SAML using the raw Metadata XML file, follow the steps below:
* Open the copied Metadata URL in a browser tab and copy the XML content.
* Navigate to Appsmith, click XML, add the raw XML in the `Metadata XML` field, and click the **SAVE & RESTART** button to save the configuration.

![How to configure Metadata XML?](/img/Appsmith-Admin-Settings-Authentication-SAML-XML.png)

</TabItem>
<TabItem label="Idp data" value="idpdata">

If you have Identity provider data like `X509 Public Certificate`, `Email`, and more, you can choose this option to configure SAML.

* Open the Metadata URL in a browser tab and copy the following data from the HTML tags:
  -  **entityID** - `<EntityDescriptor>`
  - `<SingleSignOnService>`
  - `<X509Certificate>`
  - **emailAddress** - `<NameIDFormat>`

* Navigate to Appsmith, and click **IdP Data**. Add the content of HTML tags as per the table below:

| **Appsmith Field Name** | **Metadata XML Tag**                                                                          |
| ----------------------- | --------------------------------------------------------------------------------------------- |
| **Entity ID**               | ` <EntityDescriptor`` `` `**`entityID`**`="urn:dev-ux0tussx.us.auth0.com" /`>                 |
| **Single Sign-On URL**      | `<SingleSignOnService/>`                                                                      |
| **X509 Public Certificate** | `<X509Certificate/>`                                                                          |
| **Email**                   | `<NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:`**`emailAddress`**`</NameIDFormat>` |


</TabItem>
</Tabs>

Once you have added the details, click the **SAVE & RESTART** button to save the configuration and restart the instance. When the server restarts with new configurations, you would see a screen showing the message **Authentication Successful!**.

## Log in with SAML

When the setup is complete, log in again to your instance. You would see a login screen with the button **SIGN IN WITH SAML SSO**.

<figure>
  <img src="/img/Appsmith-Login-Screen-Shows-SAML.png" style= {{width:"400px", height:"auto"}} alt="Metadata URL"/>
  <figcaption align = "center"><i>Copy the Metadata URL </i></figcaption>
</figure>